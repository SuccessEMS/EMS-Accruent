<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False" style="mc-master-page: url('..\Resources\MasterPages\No-Survey Master Page_AA.flmsp');">
    <head>
    </head>
    <body>
        <h1>SAML Troubleshooting</h1>
        <p style="line-height: 20px;margin-top: -5px;"><span class="italics">(EMS Internal Documentation)</span>
        </p>
        <p class="beforelist">This section provides troubleshooting tips and information about SAML.</p>
        <ul class="unorder-list">
            <li><a href="#Troubleshooting_Steps">Troubleshooting Steps</a>
            </li>
            <li><a href="#Verify_SAML_Configuration_PS">Verify SAML&#160;Configuration in EMS&#160;Platform Services</a>
                <ul>
                    <li><a href="#Required_Information_SP_IdP">Required Information</a>
                    </li>
                    <li><a href="#SAML_SP_Config_Tips">SAML&#160;Service Provider Configuration Tips</a>
                    </li>
                    <li><a href="#SAML_IdP_Config_Tips">SAML&#160;Identity Provider Configuration Tips</a>
                    </li>
                </ul>
            </li>
            <li><a href="#Verify_Auth_Key_Config_PS">Verify Auth Key Configuration in EMS&#160;Platform Services</a>
            </li>
            <li><a href="#SAML_Metadata">SAML&#160;Metadata Import Guidelines</a>
            </li>
            <li><a href="#SAML_Debug_Logs_Tools">SAML&#160;Debugging: Logs and Tools</a>
                <ul>
                    <li><a href="#Logs">Logs</a>
                    </li>
                    <li><a href="#SAML_Trace">How to Perform a SAML&#160;Trace</a>
                    </li>
                </ul>
            </li>
            <li><a href="#Error_Messages_and_Codes">Error Messages and Codes</a>
            </li>
        </ul>
        <p class="beforelist">See Also:</p>
        <ul class="unorder-list">
            <li>SAML&#160;2.0 Terminology and Process Overview</li>
            <li><a href="../Authentication/SAMLAuthen.html" MadCap:conditions="General.Online Only">SAML&#160;Authentication</a><a href="[%=Links.WebsitePath%]Authentication/SAMLAuthen.html" MadCap:conditions="General.Print Only">SAML&#160;Authentication</a>
            </li>
            <li><a href="../EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html" MadCap:conditions="General.Online Only">Configure Platform Services in the Admin Portal</a><a href="[%=Links.WebsitePath%]EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html" MadCap:conditions="General.Print Only">Configure Platform Services in the Admin Portal</a>
            </li>
        </ul>
        <h2><a name="Troubleshooting_Steps"></a>Troubleshooting Steps</h2>
        <p>To troubleshoot SAML&#160;configuration issues, <MadCap:annotation MadCap:createDate="2018-10-08T11:00:19.9596799-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Are these steps the best way to troubleshoot? Should support first verify the Platform configuration because it is a quick check, or is it not quick because every company is configured differently? If they can't quickly look over the PS Admin UI SAML Configuration fields, when should they review these fields? After performing a SAML Trace?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T14:19:42.5010932-06:00">perform the following steps</MadCap:annotation>:</p>
        <ol class="number-list">
            <li>Determine where in the SAML&#160;authentication process the error or issue is occurring. Refer to SAML Authentication Process for a diagram and detailed description of the process.<div class="Note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #444444;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><p><MadCap:annotation MadCap:createDate="2018-10-11T14:45:35.7242653-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this true or should this be deleted?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T14:45:47.9622596-06:00">Because SAML uses browser redirects, you can often look at the URL&#160;to determine where the problem is occurring.  If a problem is occurring while the user is on a URL belonging to the IdP, it is most likely an IdP issue. If a problem is occurring at the EMS&#160;Platform Services URL, the issue is most likely on the EMS&#160;side.</MadCap:annotation></p></div></li>
            <li>Obtain a copy of the SAML&#160;request, or SAML&#160;response if the authentication process has progressed far enough.<p>To get a sample SAML request/response, use a SAML&#160;tracer add-on tool, such as <a href="https://addons.mozilla.org/en-US/firefox/addon/saml-tracer/">Firefox SAML-tracer</a> or <a href="https://chrome.google.com/webstore/detail/saml-chrome-panel/paijfdbeoenhembfhkhllainmocckace?hl=en">SAML Chrome Panel</a>. You can also use the browser DevTools; however, you will obtain better troubleshooting results with a SAML tracer tool, and Firefox SAML-tracer is recommended.  Once you've added the SAML tracer tool to your browser, you can access the SAML-tracer through a button in the upper-right of the browser. See <a href="#SAML_Trace">How to Perform a SAML Trace</a> for an example. </p></li>
            <li>Review the SAML&#160;request/response to <MadCap:annotation MadCap:createDate="2018-10-08T12:26:36.7305028-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="When do they send the request/response to Dev? What are the situations where they send it on? How is it sent on (email, TFS bug, etc.)?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-08T12:27:19.3530515-06:00">locate the potential issue, such as:</MadCap:annotation><ul><li>Attribute information within the &lt;saml:Assertion&gt; tag in the IdP response. Keep in mind that there may be multiple assertions.</li><li><MadCap:annotation MadCap:createDate="2018-10-09T11:02:15.6948374-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="This was listed on a troubleshooting website. Can this statement be reworded for EMS?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T11:03:14.5374682-06:00">The case syntax of SAML assertion field names, for example: NameID, Email, FirstName, and LastName are crucial to SSO succeeding and can be quickly identified and modified in a customer's IdP configuration when required.</MadCap:annotation></li></ul><div class="Note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #444444;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><p><MadCap:annotation MadCap:createDate="2018-10-09T10:47:07.3014169-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this correct? When and how does support/PS send Dev SAML issues?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T10:47:35.3983326-06:00">When sending the SAML output to Dev</MadCap:annotation>, if you are unsure which part to provide, send Dev the entire SAML output, along with any other details regarding the issue.</p></div></li>
        </ol>
        <h2><a name="Verify_SAML_Configuration_PS"></a>Verify SAML&#160;Configuration in EMS&#160;Platform Services</h2>
        <h3><a name="Required_Information_SP_IdP"></a>Required Information</h3>
        <p>
            <MadCap:annotation MadCap:createDate="2018-10-08T13:52:43.4673853-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this info needed for troubleshooting, or would this information be better put into the SAML Authentication section as a checklist of info to find before configuring SAML?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-08T13:53:29.6039558-06:00">The following information is needed when configuring SAML&#160;for EMS&#160;Platform Services (service provider) and the identity provider: </MadCap:annotation>
        </p>
        <ul class="unorder-list">
            <li>Service provider requirements to make a request:<ul><li>URL to send the user to for sign-on</li><li>Whether to sign the SAML request, and if signing, the key to sign the request with (signing helps the IdP know for certain that EMS&#160;Platform Services is the SP making the request)</li></ul></li>
            <li>Identity provider requirements to process a request:<ul><li>Identity of the SP (EMS&#160;Platform Services); this is the identifier that we put in our SAML requests that tells who we are</li><li>Once the user has logged in, the IdP needs a URL for returning the user to EMS&#160;Platform Services (<MadCap:annotation MadCap:createDate="2018-10-11T13:20:06.6213114-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this the same as the &quot;Service Provider Base URL for IdP Callback&quot; that is entered in Platform?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:21:11.0067933-06:00">service provider URL</MadCap:annotation>)</li><li>Whether to sign the SAML response, and if signing, the key to sign the response with</li></ul></li>
            <li>Service provider requirements to process a response:<ul><li>IdP (public) key to verify the signature in the IdP response</li><li><MadCap:annotation MadCap:createDate="2018-10-08T13:49:35.7557586-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this assertion the one specified in PS Admin UI &quot;User Identity Field&quot;? Is there an example assertion to put here? If they don't match, what error do we get? If they have a sample SAML response, can they compare the assertion to the info in the PS Admin Config screen to fix the problem?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T09:49:41.4709220-06:00">Name of the assertion to use to associate users (in other words, which assertion matches the network ID in the EMS&#160;WebUser table)</MadCap:annotation></li></ul></li>
        </ul>
        <h3><a name="SAML_SP_Config_Tips"></a>SAML&#160;Service Provider Configuration Tips</h3>
        <p>SAML issues can arise if a customer's SAML&#160;configuration information is incomplete or incorrect in the EMS&#160;Platform Services Admin UI. To verify SAML configuration, review the information found in the <a href="../Authentication/SAMLAuthen.html" MadCap:conditions="General.Online Only">SAML&#160;Authentication</a><a href="[%=Links.WebsitePath%]Authentication/SAMLAuthen.html" MadCap:conditions="General.Print Only">SAML&#160;Authentication</a> topic. </p>
        <p>When verifying a customer's SAML configuration, keep in mind the following regarding the <a href="../Authentication/SAMLAuthen.html#Identifyyourprovider" MadCap:conditions="General.Online Only">SAML&#160;Configuration fields</a><a href="[%=Links.WebsitePath%]Authentication/SAMLAuthen.html#Identifyyourprovider" MadCap:conditions="General.Print Only">SAML&#160;Configuration fields</a> (found in EMS&#160;Platform Services Admin UI):</p>
        <ul class="unorder-list">
            <li><span class="ui">Form Post Field Name</span> — Typically, configured to use the default field text, which is <span class="ui">SamlResponse</span>.</li>
            <li><span class="ui">User Identity Field</span> —  If <span class="ui">Attribute </span>is <MadCap:annotation MadCap:createDate="2018-10-09T09:09:33.7002107-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="If &quot;Name ID&quot; is selected, does anything special need to be done. Does &quot;Name ID&quot; match the external network ID column in the WebUsers table?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T09:11:29.3060867-06:00">selected from the drop-down list</MadCap:annotation>, ensure that the <span class="ui">Identity Attribute Field</span> has been completed and contains the correct custom assertion attribute name for identifying users.</li>
            <li><span class="ui">Identity Attribute Name</span> — If the <span class="ui">Attribute</span> option is selected in the <span class="ui">User Identity Field</span>, ensure this field contains an attribute name. Attribute names can be IdP-specific, such as a user ID or email. The best way to determine what goes in this field is to <a href="#SAML_Trace">obtain a sample SAML response</a>, review the assertions, and locate the name attribute (<MadCap:annotation MadCap:createDate="2018-10-09T09:12:46.6868269-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Copy the name attribute to the Identity Attribute field? Is there a sample response we could put here? Same as the Name Assertion in the previous list, right?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T09:53:07.6854923-06:00">which will go in this field</MadCap:annotation>).</li>
            <li><span class="ui">Identity Provider Issuer</span> — The IdP issuer can be found within the &lt;saml:issuer&gt; tag in the SAML response that the IdP sends EMS Platform Services. <MadCap:annotation MadCap:createDate="2018-10-09T10:26:12.5730584-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Only if SP Base URL for IdP Callback field is configured?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T10:26:31.3323467-06:00">EMS&#160;Platform Services will autogenerate the values for the Service Provider Issuer</MadCap:annotation>.</li>
            <li><span class="ui">Service Provider Issuer</span> — The SP&#160;issuer states who we are, and it can be found within the &lt;saml:issuer&gt; tag in the SAML&#160;request that we send to the IdP. The SP&#160;issuer must match what is configured on the IdP side. For example, AD&#160;FS must be configured with the same SP issuer  that we send in our SAML request; otherwise, AD&#160;FS will reject the request.</li>
            <li><span class="ui">HTTP Binding Type</span> — Currently, only redirect is supported. See SAML Binding Types for more information.</li>
            <li><span class="ui">Identity Provider URL for Service Provider Redirect</span> — If you have the IdP metadata.xml file, you can upload it through the EMS Platform Services endpoint https://company.platform/api/v1/authentication/saml/metadata/idp. The identity provider certificate will be uploaded for you, as well as the <MadCap:annotation MadCap:createDate="2018-10-09T10:23:10.9900052-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Will the Identity Provider Issuer and the IdP URL for SP Redirect fields be populated if metadata file is uploaded?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T10:24:09.2307774-06:00">Identity Provider Issuer. The <span class="ui">Identity Provider URL for Service Provider Redirect </span>field will be populated for you.</MadCap:annotation></li>
            <li><a name="ServiceProviderBaseURL"></a><span class="ui">Service Provider Base URL for IdP Callback</span> — Only use the base URL&#160;for EMS&#160;Platform Services because EMS&#160;Platform Services will autogenerate the rest of the route. </li>
        </ul>
        <h3><a name="SAML_IdP_Config_Tips"></a>SAML&#160;Identity Provider Configuration Tips</h3>
        <p>Not all IdPs require configuration, but for those <MadCap:annotation MadCap:createDate="2018-10-10T12:16:02.4432042-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="For the tested IdPs, is there a list of which IdPs require extra configuration and what info they need?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-10T12:16:19.5733506-06:00">that do</MadCap:annotation>, errors can occur if the IdPs are not configured with the correct EMS&#160;Platform Services information.</p>
        <p>For example, AD&#160;FS&#160;needs to be configured in advance with a URL to send a user back to once the user is authenticated.  EMS&#160;Platform Services will send this URL&#160;in the SAML&#160;request; however, AD&#160;FS only uses the URL address in the request to verify that the address matches the URL in their system before sending the user back. If the URL is a location that is not configured in AD&#160;FS (not a valid location), AD&#160;FS will error out. </p>
        <p>If an IdP requires configuration of the RelayState parameter,&#160;use the EMS&#160;Platform Services URL, either the base URL&#160;or full URL, depending on the IdP requirements. <MadCap:annotation MadCap:createDate="2018-10-11T13:28:28.5035123-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this correct? Should this be pointed out?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:28:44.1447906-06:00">This EMS Platform Services URL</MadCap:annotation> is also used in the <span class="ui"><a href="#ServiceProviderBaseURL">Service Provider Base URL for IdP Callback</a></span> field of EMS Platform Services.</p>
        <ul class="unorder-list">
            <li>Base URL — https://mycompany.com/EmsPlatform</li>
            <li>Full URL —&#160;https://mycompany.com/EmsPlatform/api/v1/authentication/saml</li>
        </ul>
        <h2><a name="Verify_Auth_Key_Config_PS"></a>Verify Auth Key Configuration in EMS&#160;Platform Services</h2>
        <p>After verifying a customer's SAML&#160;configuration in the <span class="ui">SAML </span>tab of the EMS&#160;Platform Services Admin UI, you can set up or verify the Auth Key information in the <span class="ui">Auth Keys</span>  tab. For information on configuring Auth Keys, see the <a href="../EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html#Auth" MadCap:conditions="General.Online Only">Auth Keys</a><a href="[%=Links.WebsitePath%]EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html#Auth" MadCap:conditions="General.Print Only">Auth Keys</a> section. </p>
        <h3>Auth Key Configuration Tips</h3>
        <p>When setting up or verifying Auth Key information, keep in mind the following:</p>
        <ul class="unorder-list">
            <li>Service provider keys (EMS) and identity provider keys must be configured or added in separately. You can select the provider type from the <span class="ui">Purpose </span>drop-down list.</li>
            <li>You can <MadCap:annotation MadCap:createDate="2018-10-11T13:30:39.1147625-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Do we need steps for this, or does everyone know how to do this?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:30:57.9424636-06:00">autogenerate the SP keys</MadCap:annotation>. The SP keys can be self-signed; they do not have to be from a real certificate authority.</li>
            <li>You must format the Public Key and Private Key fields in a specific manner (there is an open ticket to fix this <MadCap:annotation MadCap:createDate="2018-10-09T11:13:56.2701355-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="What is the requirement? Would it be useful to give the formatting constraints here?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T11:14:16.7244717-06:00">formatting requirement)</MadCap:annotation>. </li>
            <li>Make sure that you clear out the <span class="ui">Not Before</span> and <span class="ui">Not After</span> fields. Certificates have their own expirations embedded in them, and EMS&#160;Platform Services is using those embedded expiration <MadCap:annotation MadCap:createDate="2018-10-08T15:03:30.1051901-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Should this info be in the PS config section for Auth Keys?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T11:14:56.0680396-06:00">dates</MadCap:annotation>.</li>
            <li>For the SAML&#160;Service Provider, you can enter both a Public Key and Private Key. </li>
            <li>For the SAML&#160;Identity Provider, you do not need to enter the Private Key from the IdP. This field will be grayed out. </li>
            <li>For hosted customers, we are hosting the service provider, but the customers are hosting their own IdPs. </li>
            <li>
                <MadCap:annotation MadCap:createDate="2018-10-08T15:01:54.5208185-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="For cloud, too, because we shouldn't have access to the IdP private key and we don't host the IdP, right?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:32:35.0067906-06:00">The IdP metadata only contains the Public Key</MadCap:annotation>.</li>
        </ul>
        <h2><a name="SAML_Metadata"></a>SAML&#160;Metadata Import Guidelines</h2>
        <p>SAML metadata describes how each side (SP and IdP) is configured and how each side would like their SAML&#160;requests/responses to appear. Metadata helps automate the configuration process. You do not have to configure both sides with metadata; you can configure one side manually and the other side automatically through metadata. The XML&#160;metadata file contains SAML configuration info, such as the embedded certificate, default Name ID assertion, supported binding type, and <MadCap:annotation MadCap:createDate="2018-10-11T13:34:02.8288337-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="IdP location (URL) for authentication?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:34:17.1778299-06:00">location in which to send the user</MadCap:annotation>.</p>
        <p>EMS&#160;does not currently have a UI&#160;for importing metadata. To import IdP metadata, use a POST&#160;request through Postman (or similar tool), and POST&#160;the IdP&#160;metadata to the EMS Platform Services endpoint https://company.platform/api/v1/authentication/saml/metadata/idp.  </p>
        <div class="ImportantNote" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #990000;&quot; class=&quot;mcFormatColor&quot;&gt;Important! &lt;/span&gt;&lt;/b&gt;">
            <p>
                <MadCap:annotation MadCap:createDate="2018-10-09T11:43:30.9157174-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Who creates the payload (support/PS/customer)? When do they create the payload—after the POST request to the API?  How do they create a JSON payload? What do they do with the payload file after it is created?\r\n\r\nDoes the following note from our documentation website need to be updated with the payload information?\r\n&quot;NOTE: If you have the identity provider metadata.xml file, you can upload  it through the EMS Platform Services endpoint https://company.platform/api/v1/authentication/saml/metadata/idp. The identity provider certificate will be uploaded for you and Identity Provider Issuer. The Identity Provider URL for Service Provider Redirect fields will be populated for you.&quot;" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T11:48:24.5719901-06:00">SAML&#160;metadata is in XML, but the API&#160;for EMS&#160;Platform Services is in JSON. To import a SAML&#160;metadata file, you will need to create a JSON payload where the only key is XML,&#160;and the value is the XML payload.</MadCap:annotation> </p>
        </div>
        <h2><a name="SAML_Debug_Logs_Tools"></a>SAML&#160;DebugGing: Logs and Tools</h2>
        <p>When troubleshooting SAML configuration issues, it is helpful to view the <a href="#Logs">logs</a> found in the EMS Platform Services Admin UI. It is also be helpful to perform a <a href="#SAML_Trace">SAML trace</a>, which will allow you to view the SAML&#160;requests and responses.</p>
        <h3><a name="Logs"></a>Logs</h3>
        <p>Logs are available in the <span class="ui">Logs </span>tab of the EMS&#160;Platform Services PS Admin UI. F<MadCap:annotation MadCap:createDate="2018-10-10T15:15:32.4096552-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Do they need to Edit Log Level Details to get useful logs for debugging SAML or this only for integrations logs, not global logs?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-10T15:15:33.5360117-06:00">rom the <span class="ui">Logs </span>tab,</MadCap:annotation> you can view <a href="../EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html#LOGS" MadCap:conditions="General.Online Only">global logs for EMS&#160;Platform Services</a><a href="[%=Links.WebsitePath%]EMSPlatformServices/ConfigurationGuide/ConfigPSinAdminPortal.html#LOGS" MadCap:conditions="General.Print Only">global logs for EMS&#160;Platform Services</a>. Viewing the logs in <MadCap:annotation MadCap:createDate="2018-10-09T12:10:58.1363262-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Does support use Splunk? Should we provide any additional information about using Splunk with logs?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T12:11:34.1177126-06:00">Splunk</MadCap:annotation> is useful if the error is on the service provider side (EMS&#160;Platform Services). If the issue is on the IdP side, the logs will only show that the user never returned to EMS&#160;Platform Services after the first redirect to the IdP.  </p>
        <h3><a name="SAML_Trace"></a>How to Perform a SAML&#160;Trace</h3>
        <p>To obtain a sample SAML&#160;request/response, you can perform a SAML trace. The following steps explain how to perform a SAML&#160;trace using <a href="https://addons.mozilla.org/en-US/firefox/addon/saml-tracer/">Firefox SAML-tracer</a>.</p>
        <ol class="number-list">
            <li>Install the <a href="https://addons.mozilla.org/en-US/firefox/addon/saml-tracer/">SAML-tracer</a> add-on for Firefox.</li>
            <li>In the Firefox browser, open the SAML-tracer tool and then reproduce the SAML&#160;issue in the browser. The tool will highlight all of the SAML requests and responses with  orange SAML&#160;tags on the right side of the trace window.<div class="Note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #444444;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;"><p>After installation, if SAML-tracer does not work (trace window is blank during a trace), you may need to update your Firefox browser to the latest version. </p></div></li>
            <li>Select a SAML&#160;entry in the upper portion of the trace window. Then, in the lower portion of the trace window, click the SAML filter option to view the SAML&#160;output.</li>
        </ol>
        <div class="TitleandImage">
            <p>
                <img src="Images/SAML-tracerGET.png" class="resize80_noborder_padding" /> </p>
            <p class="Caption">Performing a SAML&#160;Trace in Firefox SAML-tracer</p>
        </div>
        <ol class="number-list" start="4">
            <li>
                <MadCap:annotation MadCap:createDate="2018-10-11T14:31:42.1837266-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="What should support look for in the request/response? " MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T14:32:17.3310919-06:00">Inspect the filtered SAML&#160;information in the tracer window</MadCap:annotation>, or  save the information by copying and pasting into a text editor or by using the <span class="ui">Export </span>button.</li>
        </ol>
        <div class="Note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #444444;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;">
            <p>
                <MadCap:annotation MadCap:createDate="2018-10-09T10:47:07.3014169-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Is this correct? When and how does support/PS send Dev SAML issues?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-09T10:47:35.3983326-06:00">When sending the SAML output to Dev</MadCap:annotation>, if you are unsure which part to provide, send Dev the entire SAML output, along with any other details regarding the issue.</p>
        </div>
        <h2><a name="Error_Messages_and_Codes"></a>Error Messages and Codes</h2>
        <p>The following are SAML&#160;error messages and issues that may occur. <MadCap:annotation MadCap:createDate="2018-10-10T12:49:58.5493978-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="Are there HTTP error codes or SAML error codes or messages that support should watch for or handle a certain way?\r\n**Browser Settings: https://zscaler.zendesk.com/hc/en-us/articles/204843429-SAML-Troubleshooting-Guidelines\r\n**Error Messages: https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_saml.html\r\n**Error Codes: https://collaborationhelp.cisco.com/article/en-us/WBX68460" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T14:39:49.7436949-06:00">The list is does not contain all possible errors and solutions:</MadCap:annotation></p>
        <div class="Note" MadCap:autonum="&lt;b&gt;&lt;span style=&quot;color: #444444;&quot; class=&quot;mcFormatColor&quot;&gt;Note: &lt;/span&gt;&lt;/b&gt;">
            <p>To properly troubleshoot SAML&#160;issues, you need to understand at what point in the workflow the error or issue is occurring. Try to narrow down the place in the process. For example, if the user has reached the IdP, we know the SAML request made it to the IdP and then failed. See SAML Authentication Process for more information.</p>
        </div>
        <p><b>Invalid or Missing POST Parameter (Occurs After User Logs Into IdP)</b>
        </p>
        <p>This error can be caused by configuration issues. Try reviewing the SAML response from Firefox SAML-tracer. The following are possible causes:&#160;</p>
        <ul class="unorder-list">
            <li>Incorrect the binding type. EMS&#160;Platform Services might be expecting a redirect binding, but the IdP is sending a POST binding.</li>
            <li>The I<MadCap:annotation MadCap:createDate="2018-10-09T12:35:34.0533216-06:00" MadCap:creator="Megan.Laub" MadCap:initials="ME" MadCap:comment="How would this be determined? Where would someone look?" MadCap:editor="Megan.Laub" MadCap:editDate="2018-10-11T13:38:05.1332051-06:00">dP is sending EMS&#160;Platform Services an unexpected parameter. </MadCap:annotation></li>
        </ul>
    </body>
</html>